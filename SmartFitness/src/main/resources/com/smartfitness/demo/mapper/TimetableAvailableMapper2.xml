<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.smartfitness.demo.mapper.TimetableAvailableMapper2">
	
	<select id="selectTimetable" resultType="com.smartfitness.demo.model.TimetableAvailable2">
		select * from programtimetable_available where pr_seq=#{prSeq} and ra_switch="0";
	</select>
	<update id="reservTimetable">
		update timetable_available2
		set ra_#{reserv} = "N"
		where ra_#{reserv} = "Y"
		and pg_seq=#{pgSeq}
		and pg_max>pg_curr_cnt
		
		update programs
		set pg_cur_cnt=pg_cur_cnt+1
	</update>
	
	<update id="cancelTimetable">
		update timetable_available2
		set ra_#{cancel} = "Y", pg_curr_cnt
		where ra_#{cancel} = "N"
		and ra_seq=#{pgrSeq}
	</update>
</mapper>